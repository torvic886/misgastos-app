<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<HBox spacing="15"
      styleClass="content"
      xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.misgastos.controller.RegistroGastoController">

    <padding>
        <Insets top="15" right="15" bottom="15" left="15"/>
    </padding>

    <!-- ============================================
         IZQUIERDA: FORMULARIO CON TARJETA
         ============================================ -->
    <VBox spacing="10" HBox.hgrow="NEVER" prefWidth="380" maxWidth="380"
          styleClass="form-card">

        <Label text="âž• Registrar Gasto" 
               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>

        <GridPane hgap="10" vgap="8">
            <columnConstraints>
                <ColumnConstraints prefWidth="90" minWidth="90"/>
                <ColumnConstraints hgrow="ALWAYS"/>
            </columnConstraints>

            <Label text="CategorÃ­a:" GridPane.rowIndex="0" style="-fx-font-size: 12px;"/>
            <ComboBox fx:id="cmbCategoria" promptText="Seleccione" 
                      GridPane.rowIndex="0" GridPane.columnIndex="1" maxWidth="Infinity"/>

            <Label text="SubcategorÃ­a:" GridPane.rowIndex="1" style="-fx-font-size: 12px;"/>
            <ComboBox fx:id="cmbSubcategoria" promptText="Seleccione"
                      GridPane.rowIndex="1" GridPane.columnIndex="1" maxWidth="Infinity"/>

            <Label text="Producto:" GridPane.rowIndex="2" style="-fx-font-size: 12px;"/>
            <ComboBox fx:id="cmbProducto" editable="true" promptText="Ej: Arroz"
                      GridPane.rowIndex="2" GridPane.columnIndex="1" maxWidth="Infinity" styleClass="combo-compact"/>

            <Label fx:id="lblCedula" text="CÃ©dula:" GridPane.rowIndex="3" 
                   visible="false" managed="false" style="-fx-font-size: 12px;"/>
            <TextField fx:id="txtCedula" promptText="Solo nÃºmeros"
                       GridPane.rowIndex="3" GridPane.columnIndex="1"
                       visible="false" managed="false"/>

            <Label text="Cantidad:" GridPane.rowIndex="4" style="-fx-font-size: 12px;"/>
            <TextField fx:id="txtCantidad" text="1" GridPane.rowIndex="4" GridPane.columnIndex="1" styleClass="search-field"/>

            <Label text="Valor Unit.:" GridPane.rowIndex="5" style="-fx-font-size: 12px;"/>
            <TextField fx:id="txtValorUnitario" promptText="0.00"
                       GridPane.rowIndex="5" GridPane.columnIndex="1" styleClass="search-field"/>

            <Label text="Total:" GridPane.rowIndex="6" style="-fx-font-size: 12px;"/>
            <TextField fx:id="txtValorTotal" editable="false"
                       GridPane.rowIndex="6" GridPane.columnIndex="1" styleClass="search-field"
                       style="-fx-background-color: #f1f5f9; -fx-font-weight: bold; -fx-text-fill: #6f6dd9;"/>

            <Label text="Notas:" GridPane.rowIndex="7" style="-fx-font-size: 12px;"/>
            <TextArea fx:id="txtNotas" prefRowCount="2"
                      GridPane.rowIndex="7" GridPane.columnIndex="1"
                      style="-fx-pref-height: 50px; -fx-max-height: 50px;"/>
        </GridPane>

        <HBox spacing="8" alignment="CENTER">
            <Button text="ðŸ’¾ Guardar" styleClass="primary-button" onAction="#handleGuardar"
                    style="-fx-font-size: 13px; -fx-padding: 8 20;"/>
            <Button text="ðŸ§¹ Limpiar" styleClass="secondary-button" onAction="#handleLimpiar"
                    style="-fx-font-size: 13px; -fx-padding: 8 20;"/>
        </HBox>

    </VBox>

    <!-- ============================================
         DERECHA: TABLA CON TARJETA Y SCROLLBAR
         ============================================ -->
    <VBox spacing="8" HBox.hgrow="ALWAYS"
          styleClass="table-card">

        <Label text="ðŸ“‹ Ãšltimos gastos registrados" 
               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1e293b;"/>

        <TableView fx:id="tblUltimosGastos" VBox.vgrow="ALWAYS" style="-fx-fixed-cell-size: 34px;">
            <columns>
                <TableColumn fx:id="colFecha" text="Fecha" prefWidth="95" minWidth="85"/>
                <TableColumn fx:id="colCategoria" text="CategorÃ­a" prefWidth="120" minWidth="100"/>
                <TableColumn fx:id="colProducto" text="Producto" prefWidth="140" minWidth="120"/>
                <TableColumn fx:id="colCantidad" text="Cant" prefWidth="55" minWidth="45"/>
                <TableColumn fx:id="colValorUnitario" text="V. Unit" prefWidth="105" minWidth="95"/>
                <TableColumn fx:id="colTotal" text="Total" prefWidth="105" minWidth="95"/>
            </columns>
        </TableView>

    </VBox>

</HBox>