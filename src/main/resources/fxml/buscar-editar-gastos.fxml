<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.misgastos.controller.BuscarEditarGastosController"
      spacing="12" style="-fx-background-color: #f7fafc;">
    
    <padding>
        <Insets top="15" right="15" bottom="15" left="15"/>
    </padding>
    
    <!-- TÃTULO -->
    <HBox alignment="CENTER_LEFT" spacing="8">
        <Label text="ðŸ” Buscar y Editar Gastos" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1e3a8a;"/>
    </HBox>
    
    <!-- PANEL DE BÃšSQUEDA -->
    <VBox spacing="10" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
        
        <Label text="ðŸ“… Filtrar por Fecha" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
        
        <HBox spacing="12" alignment="CENTER_LEFT">
            <VBox spacing="3">
                <Label text="Fecha Inicio:" style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                <DatePicker fx:id="dpFechaInicio" prefWidth="140" promptText="Desde"/>
            </VBox>
            
            <VBox spacing="3">
                <Label text="Fecha Fin:" style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                <DatePicker fx:id="dpFechaFin" prefWidth="140" promptText="Hasta"/>
            </VBox>
            
            <VBox spacing="3">
                <Label text=" " style="-fx-font-size: 11px;"/>
                <HBox spacing="8">
                    <Button fx:id="btnBuscar" text="ðŸ” Buscar" onAction="#handleBuscar" 
                            styleClass="primary-button"
                            style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-padding: 6 16; -fx-font-size: 12px; -fx-cursor: hand;"/>
                    
                    <Button fx:id="btnLimpiar" text="ðŸ”„ Limpiar" onAction="#handleLimpiar"
                            styleClass="secondary-button"
                            style="-fx-background-color: #e5e7eb; -fx-text-fill: #374151; -fx-padding: 6 16; -fx-font-size: 12px; -fx-cursor: hand;"/>
                </HBox>
            </VBox>
        </HBox>
        
        <Separator style="-fx-padding: 3 0;"/>
        
        <!-- BÃšSQUEDA POR TEXTO -->
        <Label text="ðŸ”Ž Buscar Producto EspecÃ­fico" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
        
        <HBox spacing="8" alignment="CENTER_LEFT">
            <VBox spacing="3" HBox.hgrow="ALWAYS">
                <Label text="Nombre del Producto:" style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                <TextField fx:id="txtBuscarProducto" promptText="Escribe para buscar..." 
                          prefWidth="280"
                          onAction="#handleBuscarProducto"
                          style="-fx-padding: 6; -fx-font-size: 12px;"/>
            </VBox>
            
            <VBox spacing="3">
                <Label text=" " style="-fx-font-size: 11px;"/>
                <HBox spacing="8">
                    <Button text="ðŸ” Buscar Producto" onAction="#handleBuscarProducto"
                            styleClass="primary-button"
                            style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-padding: 6 16; -fx-font-size: 12px; -fx-cursor: hand;"/>
                    
                    <Button text="âœ– Limpiar BÃºsqueda" onAction="#handleLimpiarBusqueda"
                            styleClass="secondary-button"
                            style="-fx-background-color: #f59e0b; -fx-text-fill: white; -fx-padding: 6 16; -fx-font-size: 12px; -fx-cursor: hand;"/>
                </HBox>
            </VBox>
        </HBox>
        
        <Label fx:id="lblResultados" text="0 gasto(s) encontrado(s)" 
               style="-fx-font-size: 11px; -fx-text-fill: #6b7280; -fx-font-style: italic;"/>
    </VBox>
    
    <!-- TABLA DE RESULTADOS -->
    <VBox VBox.vgrow="ALWAYS" spacing="8" 
          style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 15; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
        
        <Label text="ðŸ“‹ Resultados de BÃºsqueda" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
        
        <TableView fx:id="tableGastos" VBox.vgrow="ALWAYS" 
                   prefHeight="500"
                   style="-fx-background-color: white;">
            <columns>
                <TableColumn fx:id="colId" text="ID" prefWidth="50" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colFecha" text="Fecha" prefWidth="100" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colHora" text="Hora" prefWidth="80" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colCategoria" text="CategorÃ­a" prefWidth="120"/>
                <TableColumn fx:id="colSubcategoria" text="SubcategorÃ­a" prefWidth="120"/>
                <TableColumn fx:id="colProducto" text="Producto" prefWidth="180"/>
                <TableColumn fx:id="colCantidad" text="Cant." prefWidth="60" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="colValorUnitario" text="Valor Unit." prefWidth="100" style="-fx-alignment: CENTER_RIGHT;"/>
                <TableColumn fx:id="colTotal" text="Total" prefWidth="100" style="-fx-alignment: CENTER_RIGHT;"/>
                <TableColumn fx:id="colAcciones" text="Acciones" prefWidth="150" style="-fx-alignment: CENTER;"/>
            </columns>
            
            <placeholder>
                <VBox alignment="CENTER" spacing="10" style="-fx-padding: 40;">
                    <Label text="ðŸ”­" style="-fx-font-size: 48px;"/>
                    <Label text="No se encontraron gastos" style="-fx-font-size: 14px; -fx-text-fill: #9ca3af;"/>
                    <Label text="Intenta buscar con otras fechas" style="-fx-font-size: 12px; -fx-text-fill: #d1d5db;"/>
                </VBox>
            </placeholder>
        </TableView>
    </VBox>
    
</VBox>